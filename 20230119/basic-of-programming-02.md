# プログラミングの基礎理論 第2回 言語の機能的な定義

言語は文法で定義される。

例えば、MLの一部の式は以下のように定義される。

```
<exp> ::= <id>                     // 変数
      |   <n> | <S> | true | false // 自然数(n), 文字列(S) その他定数
      |   fn <id> => <exp>         // 関数式
      |   <exp> <exp>              // 関数適用
      |   ...
```

プログラミング言語の理論ではより抽象的な定義を行うため、変数や定数を「与えられた集合」とし、これを代表するものを`メタ変数`と呼ぶ。

ラムダ式では以下の集合とメタ変数を導入する。

* 集合(Var)に対するメタ変数を`x`とする
* 定数(Const)に対するメタ変数を`c^b`(c of b)とする
  * ※ b はint等の型を明示するためのもの

構文自体に対してもメタ変数を導入できる。

* ラムダ式の集合(lambda)に対するメタ変数を`e`とする
  * ML式における非終端記号`<exp>`に相当する

BNF記法では以下のように表される。

```
e ::= x | c^b | (lambda x.e) | (e e)
```

これはMLの一部の式に示した定義と同等であることが分かる。  
このような定義を抽象構文(abstract syntax)の定義と呼ぶ。  
ここで抽象とは、語彙解析や構文解析の詳細について了解されていることを示す。

なぜ抽象構文を用いるか。  
言語の型等の性質の理論的な分析を行うため、と言える。  
また分析の対象となるのは、機能法等で分析可能な集合である、と言える。


ここで以下のBNFを思い出そう。

```
e ::= x | c^b | (lambda x.e) | (e e)
```

上記eはラムダ式の集合とみなせる。この集合を&Lambda;とする。

するとラムダ式の集合e（または&Lambda;と表現）の条件が見えてくる。

* &Lambda;はxが代表する集合Varを含む
* &Lambda;はcが代表する集合Constを含む
* もし&Lambda;にeが含まれるのであれば、eを使った式も&Lambda;に含まれる
* もしe1及びe2が&Lambda;に含まれるのであれば、(e1, e2)も&Lambda;に含まれる
* &Lambda;は以上の要素のみを含む

またBNFから、&Lambda;を生成する以下の規則も見えてくる。  
つまり先程のBNFは、&Lambda;の要素を生成する以下の操作であると言える。

* xと書いた場合、xが代表する集合Varを&Lambda;の要素に加える操作である
* c^bと書いた場合、c^bが代表する集合Constを&Lambda;の要素に加える操作である
* もしeが集合lambdaに含まれるなら、(lambda x.e)と書いた場合、これを&Lambda;に加える操作である
* もしe<sub>1</sub>,e<sub>2</sub>が集合lambdaに含まれるなら、(e<sub>1</sub> e<sub>2</sub>)と書いた場合、これを&Lambda;に加える操作である

また以上のことから、ラムダ式の集合は以上の要素生成を（無限に）繰り返して得られる集合であると言える。

## 集合の帰納的定義

動画では[ここから](https://youtu.be/RlSZVXW-2oA?t=1959)スタートする内容である。

さて、前述したラムダ式の集合における条件や規則について、それらが数学的に定義可能かを見ていく。

まず、数学的定義を行うために必要な道具（集合に関する記法）を整理する。

* A,A<sub>1</sub>...,A<sub>n</sub> を集合とする
* 集合に対して以下の集合演算が可能である
  * A<sub>1</sub>&otimes;...A<sub>x</sub> = {(a<sub>1</sub>,...,a<sub>n</sub>) | a<sub>i</sub>&isin;A<sub>i</sub> (1&le;i&le;n)}

# 参考

* [「型推論」特別講義 第２回 （プログラミング言語の基礎理論シリーズ）](https://youtu.be/RlSZVXW-2oA)
